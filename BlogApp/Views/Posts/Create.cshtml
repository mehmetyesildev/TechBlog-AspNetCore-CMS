@model PostCreateViewModel

<div class="row">
    <div class="col-lg-8 mx-auto">

        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="text-primary fw-bold m-0">
                <i class="bi bi-pencil-square me-2"></i>Yeni Yazı Oluştur
            </h2>
            <a href="/posts/list" class="btn btn-light border shadow-sm text-secondary">
                <i class="bi bi-arrow-left me-1"></i> Listeye Dön
            </a>
        </div>

        <div class="card border-0 shadow-lg rounded-4">
            <div class="card-body p-4 p-lg-5">

                <form action="Create" method="post" enctype="multipart/form-data">

                    <div asp-validation-summary="ModelOnly" class="alert alert-danger rounded-3"></div>

                    <div class="mb-4">
                        <label asp-for="Title" class="form-label fw-bold text-dark">Başlık</label>
                        <div class="input-group">
                            <span class="input-group-text bg-light text-muted border-end-0"><i
                                    class="bi bi-type-h1"></i></span>
                            <input asp-for="Title" class="form-control border-start-0 ps-0"
                                placeholder="Yazınızın başlığını buraya girin...">
                        </div>
                        <span asp-validation-for="Title" class="text-danger small"></span>
                    </div>

                    <div class="mb-4">
                        <label asp-for="Description" class="form-label fw-bold text-dark">Kısa Açıklama</label>
                        <div class="input-group">
                            <span class="input-group-text bg-light text-muted border-end-0"><i
                                    class="bi bi-card-text"></i></span>
                            <input asp-for="Description" class="form-control border-start-0 ps-0"
                                placeholder="Okuyucular için kısa bir özet...">
                        </div>
                        <span asp-validation-for="Description" class="text-danger small"></span>
                    </div>

                    <div class="mb-4">
                        <label asp-for="Url" class="form-label fw-bold text-dark">Bağlantı Adresi (Url)</label>
                        <div class="input-group">
                            <span class="input-group-text bg-light text-muted border-end-0"><i
                                    class="bi bi-link-45deg"></i></span>
                            <input asp-for="Url" class="form-control border-start-0 ps-0"
                                placeholder="ornek-yazi-basligi">
                        </div>
                        <span asp-validation-for="Url" class="text-danger small"></span>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold text-dark">Kapak Resmi</label>

                        <div class="p-3 border rounded-3 bg-light text-center position-relative hover-upload">
                            <img id="previewImage" src="#" class="img-fluid rounded shadow-sm d-none mb-3"
                                style="max-height: 200px;">

                            <div class="upload-area">
                                <i class="bi bi-cloud-arrow-up text-primary display-4"></i>
                                <p class="mb-2 text-muted fw-bold">Resim yüklemek için tıklayın veya sürükleyin</p>
                                <span class="badge bg-secondary">JPG, PNG</span>
                            </div>

                            <input type="file" name="file" id="fileInput"
                                class="position-absolute top-0 start-0 w-100 h-100 opacity-0 cursor-pointer"
                                accept="image/*" onchange="previewFile(this)">
                        </div>
                    </div>

                    <div class="mb-4">
                        <label asp-for="Content" class="form-label fw-bold text-dark">İçerik</label>
                        <textarea asp-for="Content" class="form-control" rows="10"></textarea>
                        <span asp-validation-for="Content" class="text-danger small"></span>
                    </div>

                    <div class="d-grid mt-5">
                        <button type="submit" class="btn btn-primary btn-lg rounded-pill shadow-sm fw-bold hover-scale">
                            <i class="bi bi-send-fill me-2"></i> Yazıyı Yayınla
                        </button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts{
<script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/7.9.1/tinymce.min.js" referrerpolicy="no-referrer"></script>

<script>
    // TinyMCE Başlatma
    tinymce.init({
        selector: '#Content',
        height: 400,
        menubar: false,
        plugins: 'link image code lists',
        toolbar: 'undo redo | styles | bold italic | alignleft aligncenter alignright | bullist numlist | link image'
    });

    // Resim Önizleme Fonksiyonu
    function previewFile(input) {
        var preview = document.getElementById('previewImage');
        var file = input.files[0];
        var reader = new FileReader();

        if (file) {
            reader.onloadend = function () {
                preview.src = reader.result;
                preview.classList.remove('d-none'); // Resmi görünür yap
            }
            reader.readAsDataURL(file);
        } else {
            preview.src = "";
            preview.classList.add('d-none'); // Dosya yoksa gizle
        }
    }
</script>
}

<style>
    /* Hover efektleri */
    .hover-scale {
        transition: transform 0.2s ease;
    }

    .hover-scale:hover {
        transform: scale(1.02);
    }

    .form-control:focus {
        box-shadow: none;
        border-color: #0d6efd;
    }

    .input-group:focus-within .input-group-text,
    .input-group:focus-within .form-control {
        border-color: #0d6efd;
    }

    /* Yükleme alanı efektleri */
    .cursor-pointer {
        cursor: pointer;
    }

    .hover-upload {
        transition: background-color 0.2s;
        border: 2px dashed #dee2e6 !important;
    }

    .hover-upload:hover {
        background-color: #e9ecef !important;
        border-color: #0d6efd !important;
    }
</style>